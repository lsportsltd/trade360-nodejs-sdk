---
description: 
globs: 
alwaysApply: true
---

---
# Codacy Rules
Configuration for AI behavior when interacting with Codacy

## When after ANY successful `edit_file` or `reapply` operation
- IMMEDIATELY run the `codacy_cli_analyze` tool for each file that was edited, with:
 - `rootPath`: set to the workspace path
 - `file`: set to the path of the edited file
 - `tool`: leave empty or unset
- If any issues are found in the new edits, propose and apply fixes for them.

## When after adding new dependencies, libraries or packages (e.g., after editing dependency files or running a package manager)
- IMMEDIATELY run the `codacy_cli_analyze` tool with:
 - `rootPath`: set to the workspace path
 - `tool`: set to "trivy"
 - `file`: leave empty or unset
- If any insecure dependencies are found among the newly added ones, propose and apply fixes for them.

## General
- When multiple files are affected, repeat the relevant steps for each file.
- "Propose fixes" means to both suggest and, if possible, automatically apply the fixes.
- Do not run `codacy_cli_analyze` looking for changes in duplicated code or code complexity metrics.
- Do not run `codacy_cli_analyze` looking for changes in code coverage.

## When a call to a Codacy tool that uses `repository` or `organization` as a parameter returns a 404 error
- Run the `codacy_setup_repository` tool
- After setup, immediately retry the action that failed (only retry once)
---